{% load static %}
{% with v=LAYOUT_VARIANT %}
{% if v in '1,3,5,7,9' %}
  <div class="col-md-3 mb-4">
    <div class="card movie-card h-100 shadow-sm">
      <div class="card-img-container position-relative">
        {% if movie.img %}
        <img src="{{ movie.img.url }}" alt="{{ movie.name }}" class="card-img-top" style="height: 250px; object-fit: cover;">
        {% else %}
        <img src="{% static 'images/placeholder.jpg' %}" alt="No image available" class="card-img-top" style="height: 250px; object-fit: cover;">
        {% endif %}
        <div class="movie-year position-absolute badge badge-dark p-2" style="top: 10px; right: 10px;">{{ movie.year }}</div>
        {% if movie.rating %}
        <div class="movie-rating position-absolute" style="bottom: 10px; left: 10px;">
          <span class="badge badge-warning p-2"><i class="fas fa-star"></i> {{ movie.rating|floatformat:1 }}</span>
        </div>
        {% endif %}
      </div>
      <div class="card-body pb-0">
        <h5 class="card-title font-weight-bold">{{ movie.name }}</h5>
        {% if movie.director %}
        <p class="card-subtitle text-muted mb-2"><i class="fas fa-user"></i> {{ movie.director }}</p>
        {% endif %}
        <p class="card-text movie-desc">{{ movie.desc|truncatechars:80 }}</p>
      </div>
      <div class="card-footer bg-transparent border-top-0 pt-0">
        <a href="{% url 'movieapp:detail' movie.id %}{% if DYNAMIC_HTML_ENABLED %}?seed={{ INITIAL_SEED }}{% endif %}" class="btn btn-primary btn-block">
          <i class="fas fa-info-circle mr-1"></i> View Details
        </a>
      </div>
    </div>
  </div>
{% else %}
  <div class="col-md-4 mb-4">
    <div class="card movie-card h-100 shadow-sm">
      <div class="row no-gutters">
        <div class="col-5">
          {% if movie.img %}
          <img src="{{ movie.img.url }}" alt="{{ movie.name }}" class="img-fluid h-100 w-100" style="object-fit: cover;">
          {% else %}
          <img src="{% static 'images/placeholder.jpg' %}" alt="No image available" class="img-fluid h-100 w-100" style="object-fit: cover;">
          {% endif %}
        </div>
        <div class="col-7">
          <div class="card-body py-3 pr-3">
            <div class="d-flex justify-content-between align-items-start">
              <h5 class="card-title mb-1">{{ movie.name }}</h5>
              <span class="badge badge-light">{{ movie.year }}</span>
            </div>
            {% if movie.director %}
            <p class="card-subtitle text-muted mb-2 small"><i class="fas fa-user"></i> {{ movie.director }}</p>
            {% endif %}
            <p class="card-text small mb-2">{{ movie.desc|truncatechars:60 }}</p>
            <a href="{% url 'movieapp:detail' movie.id %}{% if DYNAMIC_HTML_ENABLED %}?seed={{ INITIAL_SEED }}{% endif %}" class="btn btn-sm btn-outline-primary">Details</a>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endif %}
{% endwith %}


