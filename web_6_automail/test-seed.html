<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seed Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-panel {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            max-width: 400px;
            margin: 20px auto;
        }
        .button {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin: 4px;
        }
        .button:hover {
            background: #0056b3;
        }
        .button.active {
            background: #28a745;
        }
        .info {
            background: #e9ecef;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="test-panel">
        <h2>Seed Parameter Test</h2>
        
        <div class="info">
            <strong>Current URL:</strong> <span id="current-url"></span><br>
            <strong>Current Seed:</strong> <span id="current-seed"></span><br>
            <strong>Expected Variant:</strong> <span id="expected-variant"></span><br>
            <strong>URL Status:</strong> <span id="url-status"></span>
        </div>

        <div>
            <strong>Test Seed Values:</strong><br>
            <button class="button" onclick="setSeed(1)">Seed 1</button>
            <button class="button" onclick="setSeed(2)">Seed 2</button>
            <button class="button" onclick="setSeed(3)">Seed 3</button>
            <button class="button" onclick="setSeed(4)">Seed 4</button>
            <button class="button" onclick="setSeed(5)">Seed 5</button>
            <button class="button" onclick="setSeed(6)">Seed 6</button>
            <button class="button" onclick="setSeed(7)">Seed 7</button>
            <button class="button" onclick="setSeed(8)">Seed 8</button>
            <button class="button" onclick="setSeed(9)">Seed 9</button>
            <button class="button" onclick="setSeed(10)">Seed 10</button>
        </div>

        <div style="margin-top: 20px;">
            <button class="button" onclick="goToApp()" style="background: #dc3545;">Go to AutoMail App</button>
        </div>
    </div>

    <script>
        function getSeedFromUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            const seedParam = urlParams.get('seed');
            
            if (seedParam) {
                const seed = parseInt(seedParam, 10);
                if (seed >= 1 && seed <= 10) {
                    return seed;
                }
            }
            
            return 1; // Default to variant 1
        }

        function getVariantName(seed) {
            const variants = [
                "Classic Gmail",
                "Right Sidebar", 
                "Top Navigation",
                "Split View",
                "Card Layout",
                "Minimalist",
                "Dashboard Style",
                "Mobile First",
                "Terminal Style",
                "Magazine Layout"
            ];
            return variants[seed - 1] || "Unknown";
        }

        function setSeed(seed) {
            console.log('Setting seed to:', seed);
            const url = new URL(window.location.href);
            if (seed === 1) {
                // Remove seed parameter for default variant
                url.searchParams.delete('seed');
            } else {
                // Add seed parameter for non-default variants
                url.searchParams.set('seed', seed.toString());
            }
            window.location.href = url.toString();
        }

        function goToApp() {
            const currentSeed = getSeedFromUrl();
            window.location.href = `http://localhost:3000/?seed=${currentSeed}`;
        }

        function updateDisplay() {
            const currentSeed = getSeedFromUrl();
            const variantName = getVariantName(currentSeed);
            const hasSeedParam = window.location.search.includes('seed=');
            
            document.getElementById('current-url').textContent = window.location.href;
            document.getElementById('current-seed').textContent = currentSeed + (currentSeed === 1 ? ' (default)' : '');
            document.getElementById('expected-variant').textContent = variantName;
            document.getElementById('url-status').textContent = hasSeedParam ? 'Has seed parameter' : 'Clean URL (default)';
            
            // Update button states
            document.querySelectorAll('.button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            const activeButton = document.querySelector(`button[onclick="setSeed(${currentSeed})"]`);
            if (activeButton) {
                activeButton.classList.add('active');
            }
        }

        // Update display on page load
        updateDisplay();

        // Listen for URL changes
        window.addEventListener('popstate', updateDisplay);
    </script>
</body>
</html> 